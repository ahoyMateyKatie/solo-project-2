const models = require('../models/locationModels');

const locationController = {};

// need locationController getPlaces

locationController.getPlaces = async (req, res, next) => {
  try{
    const allPlaces = await models.Location.find({});
    res.locals.characters = allPlaces;
    return next();
  } catch (err){
    return ({
      log: `locationController.getPlaces: ERROR: ${err}`,
      message: { err: 'Error occurred in locationContoller.getPlaces.'}
    })
  }
}

// need locationController addPlace

locationController.addPlace = async (req, res, next) => {
  try {
    const { location, description, restaurant, date } = req.body;

    const placeMaker = await models.Location.create( { location, description, restaurant, date } );

    res.locals.addLoc = placeMaker;
    return next();
  } catch (err) {
    return next(err);
  }
}